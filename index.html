<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>MyProject</title>
  <base href="/">
  <style>
  </style>
  <script>
    var tempNumber = ""; // a temp number to push into numbersArry array when onclick caculation
    var numbersArray = []; //an Array to contain temp number
    var tempCalculation = ""; // a temp calculation to push into calculationsArry array when onclick number
    var calculationsArray = [];//an Array  contains temp calculation
    var calcuChain = [];// array contains numbers and calculations
    var calChain = "";
    var tempResult = "";
    var currentIndex = 0;// current index of calculationsArray and numbersArray array
    /*get value of number when onlick number*/
    function valueOfNumber(inputNumber) {
      if (tempNumber.includes('.')) {
        if (inputNumber == '.') {
          //do notthing
        } else {
          tempNumber += inputNumber;// temp number is a chain of number increase when onclick number
          document.getElementById('inputField').value = tempNumber;//display temp number on input
        }
      } else {
        tempNumber += inputNumber;// temp number is a chain of number increase when onclick number
        document.getElementById('inputField').value = tempNumber;//display temp number on input
      }
    }
    /*Add calculation into calculationsArray array*/
    function pushCalculationIntoArray() {
      //calculationsArray.push(tempCalculation);// take the addition action
      //numbersArray.push(tempNumber);// push temp number into numbersArray array
      switch (supperCalculation) {
        case "sqr":
          numbersArray.push(supperResult);
          calculationsArray.push(tempCalculation);
          calcuChain.push('sqr(' + tempNumber + ')');
          supperCalculation = "";
          break;
        case "sqrt":
          numbersArray.push(supperResult);
          calculationsArray.push(tempCalculation);
          calcuChain.push('sqrt(' + tempNumber + ')');
          supperCalculation = "";
          break;
        case "":
          calculationsArray.push(tempCalculation);
          if (calculationsArray.length < numbersArray.length) {
          } else {
            numbersArray.push(tempNumber);
            calcuChain.push(tempNumber);
          }
          break;
      }
      //calcuChain.push(tempNumber);//push tempNumber into calcuChain array
      switch (tempCalculation) {
        case "add"://if temp calculation is addition
          calcuChain.push('+');//add "+" into calcuChain arry
          break;
        case "sub"://if temp calculation is subtraction
          calcuChain.push('-');//add "-" into calcuChain array
          break;
        case "mul"://if temp calculation is multiplication
          calcuChain.push('*');//add "*" into calcuChain array
          break;
        case "div"://if temp calculation is division
          calcuChain.push('/');// add "/" into calcuChain array
          break;
      }
    }
    /*active the calculation*/
    function activeCaculation(inputCalculation) {
      this.tempCalculation = inputCalculation;
      if (tempNumber == "") {//start of caculation
        if (numbersArray.length > 0) {
          calculationsArray.splice(calculationsArray.length - 1, 2, inputCalculation);
          switch (tempCalculation) {
            case "add"://if temp calculation is addition
              calcuChain.splice(calcuChain.length - 1, 2, '+');
              break;
            case "sub"://if temp calculation is subtraction
              calcuChain.splice(calcuChain.length - 1, 2, '-');
              break;
            case "mul"://if temp calculation is multiplication
              calcuChain.splice(calcuChain.length - 1, 2, '*');
              break;
            case "div"://if temp calculation is division
              calcuChain.splice(calcuChain.length - 1, 2, '/');
              break;
          }
        }
        document.getElementById('calculationChain').innerHTML = calcuChain.join('');
      } else {
        pushCalculationIntoArray();
        document.getElementById('calculationChain').innerHTML = calcuChain.join('');
        takeCalculations();
        tempNumber = "";
      }
    }
    function equalResult(equal) {
      if (tempNumber !== "") {
        numbersArray.push(tempNumber);
        takeCalculations();
      } else {
        tempResult = parseFloat(tempResult) * 2;
      }
      tempNumber = tempResult;
      numbersArray = [];
      calculationsArray = [];
      calcuChain = [];
      document.getElementById('calculationChain').innerHTML = tempNumber;
      currentIndex = 0;
    }
    var supperCalculation = "";
    var supperResult = "";
    function valueOfSqrt(inputSuperCalculation) {
      this.supperCalculation = inputSuperCalculation;
      supperResult = Math.sqrt(tempNumber);
      document.getElementById('inputField').value = supperResult;
      if (calChain.length = 0) {
        document.getElementById('calculationChain').innerHTML = 'sqrt(' + tempNumber + ')';
      } else {
        document.getElementById('calculationChain').innerHTML = calcuChain.join('') + 'sqrt(' + tempNumber + ')';
      }
    }
    function valueOfSqr(inputSuperCalculation) {
      this.supperCalculation = inputSuperCalculation;
      supperResult = Math.pow(tempNumber, 2);
      document.getElementById('inputField').value = supperResult;
      if (calChain.length = 0) {
        document.getElementById('calculationChain').innerHTML = 'sqr(' + tempNumber + ')';
      } else {
        document.getElementById('calculationChain').innerHTML = calcuChain.join('') + 'sqr(' + tempNumber + ')';
      }
    }

    /*take Caculations*/
    function takeCalculations() {
      if (numbersArray.length < 2 && calculationsArray.length < 2) {
        tempResult = numbersArray[0];
      } else {
        for (i = currentIndex; i < numbersArray.length; i++) {//start the loop at the current Index of calculationsArray and numbersArray array
          for (j = i; j < numbersArray.length - 1; j++) {
            switch (calculationsArray[j]) {
              case "add":
                tempResult = parseFloat(tempResult) + parseFloat(numbersArray[i + 1]);//take the addition calculation
                break;
              case "sub":
                tempResult = parseFloat(tempResult) - parseFloat(numbersArray[i + 1]);//take the subtraction calculation
                break;
              case "mul":
                tempResult = parseFloat(tempResult) * parseFloat(numbersArray[i + 1]);//take the multiplicatioon calculation
                break;
              case "div":
                tempResult = parseFloat(tempResult) / parseFloat(numbersArray[i + 1]);//take the division calculation
                break;
            }
          }
          currentIndex = numbersArray.length - 1;//change the current index of calculationsArray and numbersArray array
        }
        document.getElementById('inputField').value = tempResult;//display temp result on input
      }
    }
    function clearTempVarible() {
      calculationsArray = [];
      numbersArray = [];
      calcuChain = [];
      tempResult = "";
      document.getElementById('calculationChain').innerHTML = '';
      currentIndex = 0;
      document.getElementById('inputField').value = '0';
      supperCalculation = "";
      supperResult = "";
      tempNumber = "";
    }
    function backSpace() {
      tempNumber = tempNumber.substring(0, tempNumber.length - 1);
      if (tempNumber == "") {
        document.getElementById('inputField').value = '0';
      } else {
        document.getElementById('inputField').value = tempNumber;
      }
    }
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
  <app-root></app-root>
  <div>


    <div class="gridbutton" style="margin: 0.5%">
      <p id="calculationChain"></p>
      <input id="inputField">
      <button class="btn btn-primary" onclick="clearTempVarible()" style="background: red">C</button>
      <button class="btn btn-primary" onclick="backSpace()" style="background: white; color: black">&#8592;</button>
      <button class="btn" onclick="valueOfSqr('sqr')">x
        <sup>2</sup>
      </button>
      <button class="btn" onclick="valueOfSqrt('sqrt')">&#8730;</button>
      <button class="btn btn-primary" onclick="valueOfNumber(1)">1</button>
      <button class="btn btn-primary" onclick="valueOfNumber(2)">2</button>
      <button class="btn btn-primary" onclick="valueOfNumber(3)">3</button>
      <button class="btn" onclick="activeCaculation('add')">+</button>
      <button class="btn btn-primary" onclick="valueOfNumber(4)">4</button>
      <button class="btn btn-primary" onclick="valueOfNumber(5)">5</button>
      <button class="btn btn-primary" onclick="valueOfNumber(6)">6</button>
      <button class="btn" onclick="activeCaculation('sub')">-</button>
      <button class="btn btn-primary" onclick="valueOfNumber(7)">7</button>
      <button class="btn btn-primary" onclick="valueOfNumber(8)">8</button>
      <button class="btn btn-primary" onclick="valueOfNumber(9)">9</button>
      <button class="btn" onclick="activeCaculation('mul')">x</button>
      <button class="btn btn-primary" onclick="" style="transform: rotate(180deg);">&#8723;</button>
      <button class="btn btn-primary" onclick="valueOfNumber('.')">.</button>
      <button class="btn btn-primary" onclick="valueOfNumber(0)">0</button>
      <button class="btn" onclick="activeCaculation('div')">/</button>
      <button class="btn" onclick="">
        <sup>1</sup>/x</button>
      <button class="btn" onclick="">(</button>
      <button class="btn" onclick="">)</button>
      <button class="btn btn-primary" onclick="equalResult()" style="background: black">=</button>
    </div>
  </div>
</body>

</html>